{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href={% static 'blog/header-blog.css' %}>
    <link rel="stylesheet" href={% static 'blog/blog-feed.css' %}>
    <title>Fotoblog</title>
</head>
<body>
    <header>
        {% include 'header.html' %}
    </header>

    <main>
        <section>
            {% block content %}
        
            {% endblock content %}
        </section>
    </main>

   
    <script type="text/javascript">
        document.getElementById("formdata").addEventListener("submit", function(e){
        e.preventDefault();
      
        const content = document.getElementById("id_content").value;
        const Comments = document.querySelector('.comments');
        const formData = new FormData();
      //console.log(name);
        formData.append('content', content);
        formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');
        console.log(formData);

        const formPromise = fetch('{{ post.get_absolute_url }}', {
        method: 'POST',
        body: formData});
        formPromise
        .then((response) => response.json())
        .then((data) => {
            const Para = document.createElement('p');
            Para.textContent = `${data.author}:${data.content}`;
            Comments.appendChild(Para);
        })
        .catch(error => {
            console.error('Error:', error);
        });
      });
    </script>

    <script src={% static 'base/script.js' %} defer></script>
</body>
