{% extends 'base.html' %}
{% load extras %}
{% block content %}

        {% if request.user.is_authenticated %}
            <h1> Welcome to Fotoblog, {{request.user}}.</h2> 

            {% for instance in posts_and_photos %}
                <div>
                    {% if instance|model_type == 'Photo' %}
                        <figure>
                            <img src={{ instance.image.url }} alt={{ instance.caption }} style=" max-width:300px">
                            <figcaption>{{ instance.caption }} </figcaption>
                            <p>Taken by {% name_display instance.uploader %}</p>
                            <p>{{instance.timestamp|instance_timestamp_display }}</p>
                        </figure>
                    {% elif instance|model_type == 'Post' %}
                        <h2>{{instance.title}}</h2>
                        <img src={{ instance.photo.image.url }} alt={{ instance.photo.caption }} style=" max-width:300px">
                        <p>Written by {% name_display instance.author %}</p>
                        <p>{{instance.timestamp|instance_timestamp_display}}</p>
                        <a href={{ instance.get_absolute_url }}>Read post</a>
                    {% endif %}
                </div>
            
            {% endfor %}
            
        {% endif %}
    
{% endblock content %}